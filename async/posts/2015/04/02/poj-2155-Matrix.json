{"tags":[{"name":"线段树","permalink":"http://lzy-foenix.github.io/tags/线段树/","url":"\\async\\tags\\线段树.json","count":3}],"categories":[{"name":"数据结构","permalink":"http://lzy-foenix.github.io/categories/数据结构/","url":"\\async\\categories\\数据结构.json","count":18}],"url":"\\async\\posts\\2015\\04\\02\\poj-2155-Matrix.json","date":1427965527000,"path":{"year":2015,"month":4,"day":2,"name":"poj-2155-Matrix"},"title":"poj-2155-Matrix","permalink":"http://lzy-foenix.github.io/2015/04/02/poj-2155-Matrix/","content":"<hr>\n<a id=\"more\"></a>\n<h3 id=\"题解：\"><a href=\"#题解：\" class=\"headerlink\" title=\"题解：\"></a>题解：</h3><p>二维线段树的裸题，跟正常线段树差不多，只不过当我们修改的时候，到了完全覆盖的时候就去更新Y坐标</p>\n<h3 id=\"代码：\"><a href=\"#代码：\" class=\"headerlink\" title=\"代码：\"></a>代码：</h3><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div></pre></td><td class=\"code\"><pre><div class=\"line\">#include &lt;cstdio&gt;</div><div class=\"line\">#include &lt;cstring&gt;</div><div class=\"line\">#include &lt;iostream&gt;</div><div class=\"line\">#include &lt;cstdlib&gt;</div><div class=\"line\">#include &lt;cmath&gt;</div><div class=\"line\">#include &lt;queue&gt;</div><div class=\"line\">#include &lt;set&gt;</div><div class=\"line\">#include &lt;ctime&gt;</div><div class=\"line\">#include &lt;stack&gt;</div><div class=\"line\">#include &lt;algorithm&gt;</div><div class=\"line\">#define xlc rtx&lt;&lt;1,xl,mid</div><div class=\"line\">#define xrc rtx&lt;&lt;1|1,mid+1,xr</div><div class=\"line\">#define ylc rty&lt;&lt;1,yl,mid</div><div class=\"line\">#define yrc rty&lt;&lt;1|1,mid+1,yr</div><div class=\"line\">using namespace std;</div><div class=\"line\">const int MAXN=1005;</div><div class=\"line\">int T,N,M;</div><div class=\"line\">int a1,b1,a2,b2,sum;</div><div class=\"line\">bool Tree[MAXN&lt;&lt;2][MAXN&lt;&lt;2];</div><div class=\"line\">void Clear()&#123;</div><div class=\"line\">\tmemset(Tree,0,sizeof(Tree));</div><div class=\"line\">&#125;</div><div class=\"line\">void UpdataY(int rtx,int rty,int yl,int yr)&#123;</div><div class=\"line\">\tif(b1&lt;=yl &amp;&amp; yr&lt;=b2)&#123;//完全包括</div><div class=\"line\">\t\tTree[rtx][rty]=!Tree[rtx][rty];//在此节点上取反</div><div class=\"line\">\t\treturn;</div><div class=\"line\">\t&#125;</div><div class=\"line\">\tint mid=(yl+yr)&gt;&gt;1;</div><div class=\"line\">\tif(b1 &lt;= mid) UpdataY(rtx,ylc);</div><div class=\"line\">\tif(b2 &gt;  mid) UpdataY(rtx,yrc);</div><div class=\"line\">&#125;</div><div class=\"line\">void UpdataX(int rtx,int xl,int xr)&#123;</div><div class=\"line\">\tif(a1&lt;=xl &amp;&amp; xr&lt;=a2)&#123;//覆盖区间完全包括当前区间的时候</div><div class=\"line\">\t\tUpdataY(rtx,1,1,N);//更新Y坐标</div><div class=\"line\">\t\treturn;</div><div class=\"line\">\t&#125;</div><div class=\"line\">\tint mid=(xl+xr)&gt;&gt;1;</div><div class=\"line\">\tif(a1 &lt;= mid) UpdataX(xlc);</div><div class=\"line\">\tif(a2 &gt;  mid) UpdataX(xrc);</div><div class=\"line\">&#125;</div><div class=\"line\">void QueryY(int rtx,int rty,int yl,int yr)&#123;</div><div class=\"line\">\tif(Tree[rtx][rty])sum++;</div><div class=\"line\">\tif(yl==yr)return;</div><div class=\"line\">\tint mid=(yl+yr)&gt;&gt;1;</div><div class=\"line\">\tif(b1 &lt;= mid) QueryY(rtx,ylc);</div><div class=\"line\">\telse QueryY(rtx,yrc);</div><div class=\"line\">&#125;</div><div class=\"line\">void QueryX(int rtx,int xl,int xr)&#123;</div><div class=\"line\">\tQueryY(rtx,1,1,N);</div><div class=\"line\">\tif(xl==xr)return;</div><div class=\"line\">\tint mid=(xl+xr)&gt;&gt;1;</div><div class=\"line\">\tif(a1&lt;=mid)QueryX(xlc);</div><div class=\"line\">\telse QueryX(xrc);</div><div class=\"line\">&#125;</div><div class=\"line\">int main()&#123;</div><div class=\"line\">    scanf(\"%d\",&amp;T);</div><div class=\"line\">    char ch[10];</div><div class=\"line\">    while(T--)&#123;</div><div class=\"line\">\t\tClear();</div><div class=\"line\">\t\tscanf(\"%d%d\",&amp;N,&amp;M);</div><div class=\"line\">\t\tfor(int i=1;i&lt;=M;i++)&#123;</div><div class=\"line\">\t\t\tscanf(\"%s\",ch);</div><div class=\"line\">\t\t\tif(ch[0]=='C')&#123;</div><div class=\"line\">\t\t\t\tscanf(\"%d%d%d%d\",&amp;a1,&amp;b1,&amp;a2,&amp;b2);</div><div class=\"line\">\t\t\t\tUpdataX(1,1,N);</div><div class=\"line\">\t\t\t&#125;</div><div class=\"line\">\t\t\telse&#123;</div><div class=\"line\">\t\t\t\tscanf(\"%d%d\",&amp;a1,&amp;b1); sum=0;</div><div class=\"line\">\t\t\t\tQueryX(1,1,N);</div><div class=\"line\">\t\t\t\tif(sum &amp; 1)puts(\"1\");</div><div class=\"line\">\t\t\t\telse puts(\"0\");</div><div class=\"line\">\t\t\t&#125;</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t\tif(T)puts(\"\");</div><div class=\"line\">\t&#125;</div><div class=\"line\">    return 0;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>"}