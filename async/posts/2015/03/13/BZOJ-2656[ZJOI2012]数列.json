{"tags":[{"name":"高精度","permalink":"http://lzy-foenix.github.io/tags/高精度/","url":"\\async\\tags\\高精度.json","count":1}],"categories":[{"name":"高精度","permalink":"http://lzy-foenix.github.io/categories/高精度/","url":"\\async\\categories\\高精度.json","count":2}],"url":"\\async\\posts\\2015\\03\\13\\BZOJ-2656[ZJOI2012]数列.json","date":1426251725000,"path":{"year":2015,"month":3,"day":13,"name":"BZOJ-2656[ZJOI2012]数列"},"title":"BZOJ-2656[Zjoi2012]数列","permalink":"http://lzy-foenix.github.io/2015/03/13/BZOJ-2656[ZJOI2012]数列/","content":"<hr>\n<a id=\"more\"></a>\n<h3 id=\"递归求解，高精度封装。\"><a href=\"#递归求解，高精度封装。\" class=\"headerlink\" title=\"递归求解，高精度封装。\"></a>递归求解，高精度封装。</h3><h4 id=\"可以看做是一个封装的模板题。\"><a href=\"#可以看做是一个封装的模板题。\" class=\"headerlink\" title=\"可以看做是一个封装的模板题。\"></a>可以看做是一个封装的模板题。</h4><p>例如 25<br>-&gt; 12 13<br>-&gt; 6 7<br>-&gt; 3 4<br>-&gt; 1 2<br>-&gt; 0 1<br><figure class=\"highlight c++\"><table><tr><td class=\"gutter\"><pre><div class=\"line\">1</div><div class=\"line\">2</div><div class=\"line\">3</div><div class=\"line\">4</div><div class=\"line\">5</div><div class=\"line\">6</div><div class=\"line\">7</div><div class=\"line\">8</div><div class=\"line\">9</div><div class=\"line\">10</div><div class=\"line\">11</div><div class=\"line\">12</div><div class=\"line\">13</div><div class=\"line\">14</div><div class=\"line\">15</div><div class=\"line\">16</div><div class=\"line\">17</div><div class=\"line\">18</div><div class=\"line\">19</div><div class=\"line\">20</div><div class=\"line\">21</div><div class=\"line\">22</div><div class=\"line\">23</div><div class=\"line\">24</div><div class=\"line\">25</div><div class=\"line\">26</div><div class=\"line\">27</div><div class=\"line\">28</div><div class=\"line\">29</div><div class=\"line\">30</div><div class=\"line\">31</div><div class=\"line\">32</div><div class=\"line\">33</div><div class=\"line\">34</div><div class=\"line\">35</div><div class=\"line\">36</div><div class=\"line\">37</div><div class=\"line\">38</div><div class=\"line\">39</div><div class=\"line\">40</div><div class=\"line\">41</div><div class=\"line\">42</div><div class=\"line\">43</div><div class=\"line\">44</div><div class=\"line\">45</div><div class=\"line\">46</div><div class=\"line\">47</div><div class=\"line\">48</div><div class=\"line\">49</div><div class=\"line\">50</div><div class=\"line\">51</div><div class=\"line\">52</div><div class=\"line\">53</div><div class=\"line\">54</div><div class=\"line\">55</div><div class=\"line\">56</div><div class=\"line\">57</div><div class=\"line\">58</div><div class=\"line\">59</div><div class=\"line\">60</div><div class=\"line\">61</div><div class=\"line\">62</div><div class=\"line\">63</div><div class=\"line\">64</div><div class=\"line\">65</div><div class=\"line\">66</div><div class=\"line\">67</div><div class=\"line\">68</div><div class=\"line\">69</div><div class=\"line\">70</div><div class=\"line\">71</div><div class=\"line\">72</div><div class=\"line\">73</div><div class=\"line\">74</div><div class=\"line\">75</div><div class=\"line\">76</div><div class=\"line\">77</div><div class=\"line\">78</div><div class=\"line\">79</div><div class=\"line\">80</div><div class=\"line\">81</div><div class=\"line\">82</div><div class=\"line\">83</div><div class=\"line\">84</div><div class=\"line\">85</div><div class=\"line\">86</div></pre></td><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdio&gt;</span></span></div><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;iostream&gt;</span></span></div><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstring&gt;</span></span></div><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cstdlib&gt;</span></span></div><div class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;cmath&gt;</span></span></div><div class=\"line\"><span class=\"keyword\">using</span> <span class=\"keyword\">namespace</span> <span class=\"built_in\">std</span>;</div><div class=\"line\"><span class=\"keyword\">const</span> <span class=\"keyword\">int</span> rad=<span class=\"number\">10000</span>;</div><div class=\"line\"><span class=\"keyword\">int</span> T,num[<span class=\"number\">105</span>];</div><div class=\"line\"><span class=\"keyword\">char</span> ch[<span class=\"number\">105</span>];</div><div class=\"line\"><span class=\"keyword\">struct</span> node&#123;</div><div class=\"line\">\t<span class=\"keyword\">int</span> v[<span class=\"number\">105</span>],l;</div><div class=\"line\">\tnode()&#123;</div><div class=\"line\">\t\tl=<span class=\"number\">1</span>; v[<span class=\"number\">1</span>]=<span class=\"number\">0</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\">\t<span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">\t\t<span class=\"built_in\">memset</span>(v,<span class=\"number\">0</span>,<span class=\"keyword\">sizeof</span>(v));</div><div class=\"line\">\t\tl=<span class=\"number\">1</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;n,p,q;</div><div class=\"line\">node <span class=\"keyword\">operator</span> +(node a,node b)&#123;</div><div class=\"line\">\t<span class=\"keyword\">if</span>(a.l&lt;b.l)swap(a,b);</div><div class=\"line\">\t<span class=\"keyword\">int</span> t=b.l;</div><div class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">1</span>;i&lt;=t;i++)</div><div class=\"line\">\t\ta.v[i]+=b.v[i];</div><div class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">1</span>;i&lt;=t;i++)&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">if</span>(a.v[i]&gt;=rad)&#123;</div><div class=\"line\">\t\t\t<span class=\"keyword\">if</span>(i==a.l)&#123;</div><div class=\"line\">\t\t\t\ta.v[i+<span class=\"number\">1</span>]=<span class=\"number\">0</span>; a.l++;</div><div class=\"line\">\t\t\t&#125;</div><div class=\"line\">\t\t\ta.v[i+<span class=\"number\">1</span>]+=a.v[i]/rad;</div><div class=\"line\">\t\t\tt=max(t,a.l);</div><div class=\"line\">\t\t\ta.v[i]%=rad;</div><div class=\"line\">\t\t&#125;</div><div class=\"line\">\t&#125;</div><div class=\"line\">\t<span class=\"keyword\">return</span> a;</div><div class=\"line\">&#125;</div><div class=\"line\">node <span class=\"keyword\">operator</span> +(node a,<span class=\"keyword\">int</span> p)&#123;</div><div class=\"line\">\tnode b;</div><div class=\"line\">\tb.v[<span class=\"number\">1</span>]=p; b.l=<span class=\"number\">1</span>;</div><div class=\"line\">\t<span class=\"keyword\">return</span> a+b;</div><div class=\"line\">&#125;</div><div class=\"line\">node <span class=\"keyword\">operator</span> /(node a,<span class=\"keyword\">int</span> p)&#123;</div><div class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">1</span>;i&lt;=a.l;i++)&#123;</div><div class=\"line\">\t\t<span class=\"keyword\">if</span>(a.v[i]&amp;<span class=\"number\">1</span>)a.v[i<span class=\"number\">-1</span>]+=rad/p;</div><div class=\"line\">\t\ta.v[i]/=p;</div><div class=\"line\">\t&#125;</div><div class=\"line\">\t<span class=\"keyword\">while</span>(!a.v[a.l]&amp;&amp;a.l)a.l--;</div><div class=\"line\">\t<span class=\"keyword\">return</span> a;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">\tnode a;</div><div class=\"line\">\t<span class=\"built_in\">scanf</span>(<span class=\"string\">\"%s\"</span>,ch+<span class=\"number\">1</span>);a.clear();</div><div class=\"line\">\ta.l=<span class=\"built_in\">strlen</span>(ch+<span class=\"number\">1</span>);</div><div class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">1</span>;i&lt;=a.l;i++)</div><div class=\"line\">\t\ta.v[i]=ch[a.l-i+<span class=\"number\">1</span>]-<span class=\"string\">'0'</span>;</div><div class=\"line\">\tn.l=(a.l<span class=\"number\">-1</span>)/<span class=\"number\">4</span>+<span class=\"number\">1</span>;</div><div class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=<span class=\"number\">1</span>;i&lt;=n.l;i++)&#123;</div><div class=\"line\">\t\tn.v[i]=<span class=\"number\">0</span>;</div><div class=\"line\">\t\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> k=<span class=\"number\">1</span>;k&lt;=<span class=\"number\">4</span>;k++)</div><div class=\"line\">\t\t\tn.v[i]=n.v[i]*<span class=\"number\">10</span>+a.v[(i<span class=\"number\">-1</span>)*<span class=\"number\">4</span>+(<span class=\"number\">5</span>-k)];</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">DFS</span><span class=\"params\">(node x)</span></span>&#123;</div><div class=\"line\">\t<span class=\"keyword\">if</span>(x.l==<span class=\"number\">1</span>&amp;&amp;x.v[<span class=\"number\">1</span>]==<span class=\"number\">1</span>)&#123;</div><div class=\"line\">\t\tp=x; q.clear(); <span class=\"keyword\">return</span>;</div><div class=\"line\">\t&#125;</div><div class=\"line\">\tDFS((x+<span class=\"number\">1</span>)/<span class=\"number\">2</span>);</div><div class=\"line\">\t<span class=\"keyword\">if</span>(x.v[<span class=\"number\">1</span>]&amp;<span class=\"number\">1</span>)p=p+q;</div><div class=\"line\">\t<span class=\"keyword\">else</span> q=p+q;</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Print</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%d\"</span>,p.v[p.l]);</div><div class=\"line\">\t<span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> i=p.l<span class=\"number\">-1</span>;i;i--)</div><div class=\"line\">\t\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"%04d\"</span>,p.v[i]);</div><div class=\"line\">\t<span class=\"built_in\">printf</span>(<span class=\"string\">\"\\n\"</span>);</div><div class=\"line\">&#125;</div><div class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">()</span></span>&#123;</div><div class=\"line\">\t<span class=\"comment\">//freopen(\"sequence.in\",\"r\",stdin);</span></div><div class=\"line\">\t<span class=\"comment\">//freopen(\"sequence.out\",\"w\",stdout);</span></div><div class=\"line\">\t<span class=\"built_in\">scanf</span>(<span class=\"string\">\"%d\"</span>,&amp;T);</div><div class=\"line\">\t<span class=\"keyword\">while</span>(T--)&#123;</div><div class=\"line\">\t\tinit();</div><div class=\"line\">\t\tDFS(n);</div><div class=\"line\">\t\tPrint();</div><div class=\"line\">\t&#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure></p>\n"}